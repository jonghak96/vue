<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>| AJAX | 프로미스 | JSON | 데이터처리 | AXIOS |</title>
    <script src="./vue/lib/vue.js"></script>
    <script src="./js/lib/jquery.min.js"></script>
    <script src="./js/lib/axios.min.js"></script>

    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/reset.css">

</head>
<body>
<div id="wrap">

    <div id="app">
        <h1> 회원관리 </h1>
        <table class="member">
            <tr>
                <th>번호</th>
                <th>아이디</th>
                <th>비밀번호</th>
                <th>이메일</th>
            </tr>
            <tr v-for='row, index in arr'>
                <td>{{ index + 1 }}</td>
                <td>{{ row.userId }}</td>
                <td>{{ row.userPw }}</td>
                <td>{{ row.email }}</td>
            </tr>            
        </table>
        <div class="button-wrap">
            <button v-on:click.prevent='axiosJsonFn'>회원정보 가져오기</button>
            <!-- 버튼을 누르면 새로고침이 일어남 : 막아주려면 prevent 이벤트 추가 -->
        </div>
    </div>
    

    <script>

        var app = new Vue({
            el: '#app',
            data: {
                arr: []
            },
            methods: {
                axiosJsonFn: function() {
                    var url = './data/member.json';
                    axios.get(url)
                        .then(response => {
                            // console.log(response);
                            
                            // record = element = row
                            // response.data.member.forEach(function(record, index, array) {
                                //     console.log(index, record.userId);
                                //     console.log(index, record.userPw);
                                //     console.log(index, record.email);
                                //     // console.log(index, response.data.member[index].userId);
                                //     // console.log(index, response.data.member[index].userPw);
                                //     // console.log(index, response.data.member[index].email);
                                // });
                                // console.log(response.data.member[0].userId);
                                // console.log(response.data.member[0].userPw);
                                // console.log(response.data.member[0].email);
                                
                                this.arr = response.data.member;
                        })
                        // (member : 객체배열속성)
                        // 세미콜론 쓰지 않는다!!!!!!!!!!!!!!!!!!!!
                        // .then((response) => {

                        // })
                        // .then(function(response) {

                        // })

                    // var url = './data/member.php';
                    // var data = {
                    //     이름 : 입력폼내용,
                    //     이름 : 입력폼내용,
                    //     이름 : 입력폼내용,
                    //     이름 : 입력폼내용
                    // }
                    // axios.post(url, data);
                }
            }
        });

    </script>

</div>
</body>
</html>